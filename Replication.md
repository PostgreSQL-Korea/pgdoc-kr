# 데이터베이스 복제

김상기



이 장에서는 PostgreSQL 데이터베이스 서버를 복제하는 방법과 데이터베이스 운영자 시각에서의 모니터링, 응용 프로그램 개발자 시각에서의 복제 환경 데이터베이스 서버를 이용하는 방법, 시스템 관리자 시각에서의 고가용성까지 다룬다.

여기서 소개하는 각 데이터베이스 서버에 대한 용어 정리부터 한다.

* 운영 서버 Active Server: 서비스를 제공하는 응ᅟ용 프로그램이 접속 가능한 서버
* 대기 서버 Standby Server: 운영 서버 장애시 운영 서버를 대체 하기 위한 용도로 대기 하는 서버, 이 서버는 응용 프로그램이 접속 가능할 수도 있고 \(읽기 전용 Select Only 보조 서버\), 접속이 불가능할 수도 있다\(순수 대기 서버\)
* 주 서버 Master Server: 스트리밍 복제 관점에서 트랜잭션 로그\(Write Ahead Log 이하 WAL\)를 전달 해 주는 서버 \(송신 서버\)
* 보조 서버 Slave Server: 스트리밍 복제 관점에서 WAL를 전달 받는 서버 \(수신 서버\), 현재 PostgreSQL 물리적 WAL 스트리밍 복제 기법에서는 이 서버는 읽기 전용  서버가 된다.

## 복제 기법 소개

운영 서버의 자료를 또 다른 서버에 동기화 하는 것을 복제 Replication이라 한다. WAL 로그를 복제 대상 서버로 보내고 그것을 재실행 해서 자료를 동기화 하는 기법이다.

WAL 그대로 전달하는 물리적 복제와 WAL를 플러그인을 통해서 논리적으로 디코딩 해서 전달하는 논리적 복제로 나뉜다. 전자는 일반적으로 WAL 스트리밍 복제라고 하며, 후자는 논리적 디코딩을 이용한 복제라고 한다.   

### WAL 물리적 스트리밍 복제



## WAL 물리적 스트리밍 복제

## WAL 논리적 디코딩

## 복제 모니터링

## 고가용성을 고려한 복제 환경



